import{a as E}from"./chunk-SAXCGLB6.js";import"./chunk-GJ3O3IXG.js";import"./chunk-5YWOTWV3.js";import{a as x}from"./chunk-DHNXJEZ4.js";import{k as I,w as j}from"./chunk-WDYG26PG.js";import{$ as A,G as g,Ka as y,L as S,La as R,Ma as b,Q as l,Rb as M,S as v,Sb as f,Ta as C,Ub as w,ab as D,db as F,z as d}from"./chunk-LC2BMWWT.js";import{d as o,e as a,f as c}from"./chunk-HPEDZGUO.js";var h=(()=>{var e,t,p;let r=class extends w{constructor(){super(...arguments);a(this,e,void 0);a(this,t,void 0);a(this,p,void 0);c(this,e,l(j)),c(this,t,l(I)),c(this,p,l(x)),this.getArticle=this.effect(g(s=>o(this,e).getArticleDetail(s).pipe(f(i=>{this.patchState({article:i.article})},i=>{console.error(`Get article ${s} failed`,i),o(this,t).navigate(["/"])})))),this.updateArticle=this.effect(d(s=>(s.disable(),o(this,e).updateArticle(this.selectors.article().slug,s.getRawValue()).pipe(f(i=>{i&&i.article?o(this,t).navigate(["/article",i.article.slug]):o(this,t).navigate(["/profile",o(this,p).selectors.user()?.username])},i=>{this.patchState({errorResponse:i.error})},()=>{s.enable()})))))}ngrxOnStoreInit(){this.setState({errorResponse:null,article:{}})}},n=r;return e=new WeakMap,t=new WeakMap,p=new WeakMap,(()=>{r.\u0275fac=function(){let s;return function(O){return(s||(s=A(r)))(O||r)}}()})(),(()=>{r.\u0275prov=S({token:r,factory:r.\u0275fac})})(),n})();var k=(()=>{var e;let t=class{constructor(){a(this,e,void 0);c(this,e,l(h)),this.errorResponse=o(this,e).selectors.errorResponse,this.article=o(this,e).selectors.article}ngOnInit(){o(this,e).getArticle(this.slug)}submit(r){o(this,e).updateArticle(r)}},n=t;return e=new WeakMap,(()=>{t.\u0275fac=function(u){return new(u||t)}})(),(()=>{t.\u0275cmp=v({type:t,selectors:[["app-edit-article"]],inputs:{slug:"slug"},standalone:!0,features:[D([M(h)]),F],decls:1,vars:2,consts:[[3,"errorResponse","article","submit"]],template:function(u,m){u&1&&(R(0,"app-article-form",0),C("submit",function(i){return m.submit(i)}),b()),u&2&&y("errorResponse",m.errorResponse)("article",m.article())},dependencies:[E],changeDetection:0})})(),n})(),Y=k;export{Y as default};

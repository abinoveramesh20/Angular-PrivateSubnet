import{a as oe,b as re}from"./chunk-XCAWGVDK.js";import{a as j}from"./chunk-DHNXJEZ4.js";import{a as ee,w as ie}from"./chunk-WDYG26PG.js";import{$ as W,Ca as h,G as Y,H as $,Hb as X,Ia as S,Ib as I,Jb as Z,Ka as v,L as x,La as p,Ma as d,Oa as P,Ob as q,Pa as w,Q as g,Ra as A,Rb as te,S as y,Sb as k,Ta as F,Ua as O,Ub as ne,Va as J,W as R,Ya as _,Z as M,Za as D,_ as E,ab as K,db as b,fb as Q,jb as L,r as U,z as B}from"./chunk-LC2BMWWT.js";import{d as o,e as l,f as m,g as z}from"./chunk-HPEDZGUO.js";var ae=(()=>{var e;let t=class{constructor(){l(this,e,g(ee))}getTags(){return o(this,e).get("/tags")}},n=t;return e=new WeakMap,(()=>{t.\u0275fac=function(i){return new(i||t)}})(),(()=>{t.\u0275prov=x({token:t,factory:t.\u0275fac,providedIn:"root"})})(),n})();var f={yourFeed:"Your Feed",globalFeed:"Global Feed",tagFeed:"Tag Feed"},T=(()=>{var e,t,r,u,i,se;let s=class extends ne{constructor(){super(...arguments);l(this,i);l(this,e,void 0);l(this,t,void 0);l(this,r,void 0);l(this,u,void 0);m(this,e,g(ie)),m(this,t,g(ae)),m(this,r,g(q)),this.getTags=this.effect(Y(()=>o(this,t).getTags().pipe(k(a=>{this.patchState({tags:a.tags})},a=>{console.error("Get Tags Failed",a)})))),this.queryArticle=this.effect($(a=>{this.patchState({currentOffset:a.params.offset,feedTypeSelected:a.feedType,tagSelected:a.feedType===f.tagFeed?a.params.tag:null,currentLimit:a.params.limit}),o(this,u).call(this)})),this.onOffsetChange=this.effect($(a=>{this.patchState({currentOffset:a}),o(this,r).scrollToPosition([0,0]),o(this,u).call(this)})),this.toggleFavorite=this.effect(B(a=>U(()=>a.favorited?o(this,e).unfavoriteArticle(a.slug):o(this,e).favoriteArticle(a.slug)).pipe(k(()=>{o(this,u).call(this)},N=>{console.error("Toggle Favorite Failed",N)})))),m(this,u,this.effect(Y(()=>z(this,i,se).call(this).pipe(k(a=>{this.patchState({articleList:a.articles,articleCount:a.articlesCount})},a=>{console.error("Get Article Failed",a)})))))}ngrxOnStoreInit(){this.setState({articleList:[],tags:[],articleCount:0,feedTypeSelected:null,tagSelected:null,currentOffset:0,currentLimit:10})}},n=s;return e=new WeakMap,t=new WeakMap,r=new WeakMap,u=new WeakMap,i=new WeakSet,se=function(){switch(this.selectors.feedTypeSelected()){case f.tagFeed:return o(this,e).getArticleGlobal({limit:this.selectors.currentLimit(),offset:this.selectors.currentOffset(),tag:this.selectors.tagSelected()});case f.globalFeed:return o(this,e).getArticleGlobal({limit:this.selectors.currentLimit(),offset:this.selectors.currentOffset()});default:return o(this,e).getFeed({limit:this.selectors.currentLimit(),offset:this.selectors.currentOffset()})}},(()=>{s.\u0275fac=function(){let a;return function(ge){return(a||(a=W(s)))(ge||s)}}()})(),(()=>{s.\u0275prov=x({token:s,factory:s.\u0275fac})})(),n})();var pe=function(n){return{active:n}};function de(n,e){if(n&1){let t=A();P(0),p(1,"li",3)(2,"span",4),F("click",function(){let i=M(t).$implicit,c=O();return E(c.onToggleFeed(i.feedType))}),_(3),d()(),w()}if(n&2){let t=e.$implicit,r=O();h(2),v("ngClass",Q(2,pe,t.feedType===r.feedTypeSelected())),h(1),D(t.title)}}var le=(()=>{var e,t;let r=class{constructor(){l(this,e,void 0);l(this,t,void 0);m(this,e,g(j)),m(this,t,g(T)),this.feedTypeSelected=o(this,t).selectors.feedTypeSelected,this.tabList=R(()=>{if(!o(this,e).selectors.isAuthenticated())return[{title:"Global Feed",feedType:f.globalFeed}];let i=[{title:"Your Feed",feedType:f.yourFeed},{title:"Global Feed",feedType:f.globalFeed}];return this.feedTypeSelected()&&this.feedTypeSelected()!==f.globalFeed&&this.feedTypeSelected()!==f.yourFeed?[...i,{title:`#${o(this,t).selectors.tagSelected()}`,feedType:f.tagFeed}]:i}),this.toggleFeed=new L}onToggleFeed(i){this.feedTypeSelected()!==i&&this.toggleFeed.emit(i)}},n=r;return e=new WeakMap,t=new WeakMap,(()=>{r.\u0275fac=function(c){return new(c||r)}})(),(()=>{r.\u0275cmp=y({type:r,selectors:[["app-feed-toggle"]],outputs:{toggleFeed:"toggleFeed"},standalone:!0,features:[b],decls:3,vars:1,consts:[[1,"toggle"],[1,"nav","nav-pills","outline-active"],[4,"ngFor","ngForOf"],[1,"nav-item"],[1,"nav-link",3,"ngClass","click"]],template:function(c,s){c&1&&(p(0,"div",0)(1,"ul",1),S(2,de,4,4,"ng-container",2),d()()),c&2&&(h(2),v("ngForOf",s.tabList()))},dependencies:[I,X],styles:[".toggle[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]{margin-left:.2rem}.toggle[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{color:var(--extra-gray-color);border-radius:0;cursor:pointer}.active[_ngcontent-%COMP%]{background:var(--white-color)!important;border-bottom:2px solid var(--green-color)!important;color:var(--green-color)!important}"],changeDetection:0})})(),n})();function fe(n,e){if(n&1){let t=A();P(0),p(1,"span",2),F("click",function(){let i=M(t).$implicit,c=O();return E(c.selectTag.emit(i))}),_(2),d(),w()}if(n&2){let t=e.$implicit;h(2),D(t)}}var ce=(()=>{var e;let t=class{constructor(){l(this,e,void 0);m(this,e,g(T)),this.tags=o(this,e).selectors.tags,this.selectTag=new L}ngOnInit(){o(this,e).getTags()}},n=t;return e=new WeakMap,(()=>{t.\u0275fac=function(i){return new(i||t)}})(),(()=>{t.\u0275cmp=y({type:t,selectors:[["app-tags"]],outputs:{selectTag:"selectTag"},standalone:!0,features:[b],decls:5,vars:1,consts:[[1,"side-bar"],[4,"ngFor","ngForOf"],[1,"tag-default","trending-tag",3,"click"]],template:function(i,c){i&1&&(p(0,"div",0)(1,"p"),_(2,"Popular Tags"),d(),p(3,"div"),S(4,fe,3,1,"ng-container",1),d()()),i&2&&(h(4),v("ngForOf",c.tags()))},dependencies:[I],styles:[".tag-default[_ngcontent-%COMP%]{font-size:.8rem;padding:.1rem .6em;white-space:nowrap;margin-right:3px;margin-bottom:.2rem;display:inline-block;border-radius:10rem;text-decoration:none;cursor:pointer}.trending-tag[_ngcontent-%COMP%]{background-color:var(--gray-color);color:var(--white-color)!important}.trending-tag[_ngcontent-%COMP%]:hover{background-color:var(--extra-gray-color)}"],changeDetection:0})})(),n})();function me(n,e){n&1&&(p(0,"div",8)(1,"h1",9),_(2,"conduit"),d(),p(3,"p",10),_(4,"A place to share your knowledge"),d()())}var ue=(()=>{var e,t;let r=class{constructor(){l(this,e,void 0);l(this,t,void 0);m(this,e,g(T)),m(this,t,g(j)),this.articleCount=o(this,e).selectors.articleCount,this.currentOffset=o(this,e).selectors.currentOffset,this.isAuthenticated=o(this,t).selectors.isAuthenticated,this.articleList=o(this,e).selectors.articleList}ngOnInit(){this.isAuthenticated()?this.toggleFeed(f.yourFeed):this.toggleFeed(f.globalFeed)}selectTag(i){o(this,e).queryArticle({feedType:f.tagFeed,params:{limit:10,offset:0,tag:i}})}toggleFeed(i){o(this,e).queryArticle({feedType:i,params:{limit:10,offset:0}})}onPageOffsetChange(i){o(this,e).onOffsetChange(i)}toggleFavorite(i){o(this,e).toggleFavorite(i)}},n=r;return e=new WeakMap,t=new WeakMap,(()=>{r.\u0275fac=function(c){return new(c||r)}})(),(()=>{r.\u0275cmp=y({type:r,selectors:[["app-home"]],standalone:!0,features:[K([te(T)]),b],decls:8,vars:6,consts:[["class","banner",4,"ngIf"],[1,"news-feed","row"],[1,"col-9"],[3,"toggleFeed"],[3,"articleList","toggleFavorite"],[3,"totalCount","offset","offsetChange"],[1,"col-3"],[3,"selectTag"],[1,"banner"],[1,"title"],[1,"description"]],template:function(c,s){c&1&&(S(0,me,5,0,"div",0),p(1,"div",1)(2,"div",2)(3,"app-feed-toggle",3),F("toggleFeed",function(C){return s.toggleFeed(C)}),d(),p(4,"app-article-list",4),F("toggleFavorite",function(C){return s.toggleFavorite(C)}),d(),p(5,"app-pagination",5),F("offsetChange",function(C){return s.onPageOffsetChange(C)}),d()(),p(6,"div",6)(7,"app-tags",7),F("selectTag",function(C){return s.selectTag(C)}),d()()()),c&2&&(v("ngIf",!s.isAuthenticated()),h(1),J("margin-top",s.isAuthenticated()?"":"232px"),h(3),v("articleList",s.articleList),h(1),v("totalCount",s.articleCount)("offset",s.currentOffset))},dependencies:[ce,le,Z,oe,re],styles:[".banner[_ngcontent-%COMP%]{background-color:var(--green-color);text-align:center;color:#fff;padding:2rem;position:absolute;width:100%;left:0;top:58px}.banner[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-family:var(--font-titillium);font-size:3.5rem;padding-bottom:.5rem}.banner[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:300!important}"],changeDetection:0})})(),n})(),st=ue;export{st as default};
